{"version":3,"file":"settings-dialog.bundle.js","mappings":"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","sources":["webpack://openfin-web--web-interop-support-context-and-intents/./client/src/content/settings-dialog.ts"],"sourcesContent":["import type { Settings } from \"../shapes/setting-shapes\";\n\nwindow.addEventListener(\"DOMContentLoaded\", async () => {\n\tif (window.fdc3) {\n\t\tawait init();\n\t} else {\n\t\twindow.addEventListener(\"fdc3Ready\", async () => {\n\t\t\tawait init();\n\t\t});\n\t}\n});\n\n/**\n * Initialize the settings.\n */\nasync function init(): Promise<void> {\n\t// platform settings\n\tconst title = document.querySelector<HTMLInputElement>(\"#title\");\n\tconst subTitle = document.querySelector<HTMLInputElement>(\"#subTitle\");\n\tconst logo = document.querySelector<HTMLInputElement>(\"#logo\");\n\n\t// cloud settings\n\tconst username = document.querySelector<HTMLInputElement>(\"#username\");\n\tconst password = document.querySelector<HTMLInputElement>(\"#password\");\n\tconst platformId = document.querySelector<HTMLInputElement>(\"#platformId\");\n\tconst cloudUrl = document.querySelector<HTMLInputElement>(\"#cloudUrl\");\n\tconst sourceId = document.querySelector<HTMLInputElement>(\"#sourceId\");\n\n\tconst saveButton = document.querySelector<HTMLButtonElement>(\"#save\");\n\tconst resetButton = document.querySelector<HTMLButtonElement>(\"#reset\");\n\tconst cancelButton = document.querySelector<HTMLButtonElement>(\"#cancel\");\n\n\t// assign returned settings to the input fields\n\tif (\n\t\ttitle === null ||\n\t\tsubTitle === null ||\n\t\tlogo === null ||\n\t\tusername === null ||\n\t\tpassword === null ||\n\t\tplatformId === null ||\n\t\tcloudUrl === null ||\n\t\tsourceId === null ||\n\t\tsaveButton === null ||\n\t\tresetButton === null ||\n\t\tcancelButton === null ||\n\t\twindow.fin === undefined\n\t) {\n\t\tconsole.error(\"Unable to use settings as there are missing input fields/buttons.\");\n\t\treturn;\n\t}\n\n\tconst settingsResolverChannel = \"settings-resolver\";\n\tconsole.log(\"Settings dialog initialized\", settingsResolverChannel);\n\n\tconst settingsResolverService =\n\t\tawait window.fin.InterApplicationBus.Channel.create(settingsResolverChannel);\n\n\tlet appliedSettings: Settings | undefined;\n\n\tconsole.log(\"Registering apply-settings handler...\");\n\tsettingsResolverService.register(\"apply-settings\", async (data) => {\n\t\tconst settings = (data as { customData: { settings: Settings } }).customData.settings;\n\t\ttitle.value = settings?.platform?.ui?.title;\n\t\tsubTitle.value = settings?.platform?.ui?.subTitle;\n\t\tlogo.value = settings?.platform?.ui?.logo;\n\t\tusername.value = settings?.platform.cloudInterop?.connectParams?.basicAuthenticationParameters?.username ?? \"\";\n\t\tpassword.value = settings?.platform.cloudInterop?.connectParams?.basicAuthenticationParameters?.password ?? \"\";\n\t\tplatformId.value = settings?.platform.cloudInterop?.connectParams?.platformId;\n\t\tcloudUrl.value = settings?.platform.cloudInterop?.connectParams?.url;\n\t\tsourceId.value = settings?.platform.cloudInterop?.connectParams.sourceId ?? \"\";\n\t\tappliedSettings = settings;\n\t});\n\n\tsaveButton.addEventListener(\"click\", async () => {\n\t\tconsole.log(`And appliedSettings is.... ${appliedSettings}`);\n\t\tif (appliedSettings === undefined) {\n\t\t\tconsole.error(\"Unable to save settings as they are not defined.\");\n\t\t\treturn;\n\t\t}\n\t\tappliedSettings.platform.ui.title = title.value;\n\t\tappliedSettings.platform.ui.subTitle = subTitle.value;\n\t\tappliedSettings.platform.ui.logo = logo.value;\n\t\tif (appliedSettings.platform?.cloudInterop?.connectParams?.basicAuthenticationParameters) {\n\t\t\tappliedSettings.platform.cloudInterop.connectParams.basicAuthenticationParameters.username = username.value;\n\t\t\tappliedSettings.platform.cloudInterop.connectParams.basicAuthenticationParameters.password = password.value;\n\t\t}\n\t\tappliedSettings.platform.cloudInterop.connectParams.platformId = platformId.value;\n\t\tappliedSettings.platform.cloudInterop.connectParams.url = cloudUrl.value;\n\t\tappliedSettings.platform.cloudInterop.connectParams.sourceId = sourceId.value;\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\tsettingsResolverService.publish(\"settings-resolver-response\", {\n\t\t\tsettingsResolverResponse: {\n\t\t\t\taction: \"save-reload\",\n\t\t\t\tsettings: appliedSettings\n\t\t\t}\n\t\t});\n\t});\n\n\tresetButton.addEventListener(\"click\", async () => {\n\t\t// an example of using an app channel.\n\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\tsettingsResolverService.publish(\"settings-resolver-response\", {\n\t\t\tsettingsResolverResponse: {\n\t\t\t\taction: \"reset-reload\"\n\t\t\t}\n\t\t});\n\t});\n\n\tcancelButton.addEventListener(\"click\", async () => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\tsettingsResolverService.publish(\"settings-resolver-response\", {\n\t\t\tsettingsResolverResponse: {\n\t\t\t\taction: \"close\"\n\t\t\t}\n\t\t});\n\t});\n}\n"],"names":[],"sourceRoot":""}